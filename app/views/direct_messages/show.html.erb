<h1>Chat with <%= @chat_partner.email %></h1>

<%= form_with(model: @private_message, url: direct_message_path(chat_partner_id: @chat_partner.id), local: true) do |form| %>
  <div class="field">
    <%= form.label :content %>
    <%= form.text_area :content %>
  </div>

  <div class="actions">
    <%= form.submit "Send" %>
  </div>
<% end %>

<h2>Messages</h2>
<ul>
  <% @private_messages.each do |message| %>
    <li>
      <strong><%= message.sender == current_user ? 'You' : @chat_partner.email %>:</strong>
      <%= message.content %>
      <small><%= message.created_at.strftime('%Y-%m-%d %H:%M:%S') %></small>
    </li>
  <% end %>
</ul>

